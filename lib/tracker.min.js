"object"!=typeof JSON_Z&&"object"==typeof window.JSON&&window.JSON.stringify&&window.JSON.parse?JSON_Z=window.JSON:function(){var s={};(function(){var e="function"==typeof define&&define.amd,L=function(e){return"function"===e||"object"===e},t=L(typeof s)&&s&&!s.nodeType&&s,J=L(typeof window)&&window||this,n=t&&L(typeof module)&&module&&!module.nodeType&&"object"==typeof global&&global;function R(e,c){e||(e=J.Object()),c||(c=J.Object());var u=e.Number||J.Number,l=e.String||J.String,t=e.Object||J.Object,d=e.Date||J.Date,n=e.SyntaxError||J.SyntaxError,b=e.TypeError||J.TypeError,r=e.Math||J.Math,o=e.JSON||J.JSON;"object"==typeof o&&o&&(c.stringify=o.stringify,c.parse=o.parse);var I,S,C,i=t.prototype,E=i.toString,f=new d(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(e){}function p(e){if(p[e]!==C)return p[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=p("json-stringify")&&p("json-parse");else{var n,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var o=c.stringify,i="function"==typeof o&&f;if(i){(n=function(){return 1}).toJSON=n;try{i="0"===o(0)&&"0"===o(new u)&&'""'==o(new l)&&o(E)===C&&o(C)===C&&o()===C&&"1"===o(n)&&"[1]"==o([n])&&"[null]"==o([C])&&"null"==o(null)&&"[null,null,null]"==o([C,E,null])&&o({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===o(null,n)&&"[\n 1,\n 2\n]"==o([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==o(new d(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==o(new d(864e13))&&'"-000001-01-01T00:00:00.000Z"'==o(new d(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==o(new d(-1))}catch(e){i=!1}}t=i}if("json-parse"==e){var a=c.parse;if("function"==typeof a)try{if(0===a("0")&&!a(!1)){var s=5==(n=a(r)).a.length&&1===n.a[0];if(s){try{s=!a('"\t"')}catch(e){}if(s)try{s=1!==a("01")}catch(e){}if(s)try{s=1!==a("1.")}catch(e){}}}}catch(e){s=!1}t=s}}return p[e]=!!t}if(!p("json")){var h="[object Function]",N="[object Number]",_="[object String]",D="[object Array]",s=p("bug-string-char-index");if(!f)var O=r.floor,a=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return a[t]+365*(e-1970)+O((e-1969+(t=+(1<t)))/4)-O((e-1901+t)/100)+O((e-1601+t)/400)};if((I=i.hasOwnProperty)||(I=function(e){var n,t={};return I=(t.__proto__=null,t.__proto__={toString:1},t).toString!=E?function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,I.call(this,e)}),S=function(e,t){var n,a,r,o=0;for(r in(n=function(){this.valueOf=0}).prototype.valueOf=0,a=new n)I.call(a,r)&&o++;return n=a=null,(S=o?2==o?function(e,t){var n,r={},o=E.call(e)==h;for(n in e)o&&"prototype"==n||I.call(r,n)||!(r[n]=1)||!I.call(e,n)||t(n)}:function(e,t){var n,r,o=E.call(e)==h;for(n in e)o&&"prototype"==n||!I.call(e,n)||(r="constructor"===n)||t(n);(r||I.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,r,o=E.call(e)==h,i=!o&&"function"!=typeof e.constructor&&L(typeof e.hasOwnProperty)&&e.hasOwnProperty||I;for(n in e)o&&"prototype"==n||!i.call(e,n)||t(n);for(r=a.length;n=a[--r];i.call(e,n)&&t(n));}))(e,t)},!p("json-stringify")){var g={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},B=function(e,t){return("000000"+(t||0)).slice(-e)},M=function(e){for(var t='"',n=0,r=e.length,o=!s||10<r,i=o&&(s?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=g[a];break;default:if(a<32){t+="\\u00"+B(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},U=function(e,t,n,r,o,i,a){var s,c,u,l,d,f,p,h,g,m,v,T,w,y,A,k;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if("[object Date]"!=(c=E.call(s))||I.call(s,"toJSON"))"function"==typeof s.toJSON&&(c!=N&&c!=_&&c!=D||I.call(s,"toJSON"))&&(s=s.toJSON(e));else if(-1/0<s&&s<1/0){if(j){for(d=O(s/864e5),u=O(d/365.2425)+1970-1;j(u+1,0)<=d;u++);for(l=O((d-j(u,0))/30.42);j(u,l+1)<=d;l++);d=1+d-j(u,l),p=O((f=(s%864e5+864e5)%864e5)/36e5)%24,h=O(f/6e4)%60,g=O(f/1e3)%60,m=f%1e3}else u=s.getUTCFullYear(),l=s.getUTCMonth(),d=s.getUTCDate(),p=s.getUTCHours(),h=s.getUTCMinutes(),g=s.getUTCSeconds(),m=s.getUTCMilliseconds();s=(u<=0||1e4<=u?(u<0?"-":"+")+B(6,u<0?-u:u):B(4,u))+"-"+B(2,l+1)+"-"+B(2,d)+"T"+B(2,p)+":"+B(2,h)+":"+B(2,g)+"."+B(3,m)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if("[object Boolean]"==(c=E.call(s)))return""+s;if(c==N)return-1/0<s&&s<1/0?""+s:"null";if(c==_)return M(""+s);if("object"==typeof s){for(y=a.length;y--;)if(a[y]===s)throw b();if(a.push(s),v=[],A=i,i+=o,c==D){for(w=0,y=s.length;w<y;w++)T=U(w,s,n,r,o,i,a),v.push(T===C?"null":T);k=v.length?o?"[\n"+i+v.join(",\n"+i)+"\n"+A+"]":"["+v.join(",")+"]":"[]"}else S(r||s,function(e){var t=U(e,s,n,r,o,i,a);t!==C&&v.push(M(e)+":"+(o?" ":"")+t)}),k=v.length?o?"{\n"+i+v.join(",\n"+i)+"\n"+A+"}":"{"+v.join(",")+"}":"{}";return a.pop(),k}};c.stringify=function(e,t,n){var r,o,i,a;if(L(typeof t)&&t)if((a=E.call(t))==h)o=t;else if(a==D){i={};for(var s,c=0,u=t.length;c<u;s=t[c++],((a=E.call(s))==_||a==N)&&(i[s]=1));}if(n)if((a=E.call(n))==N){if(0<(n-=n%1))for(r="",10<n&&(n=10);r.length<n;r+=" ");}else a==_&&(r=n.length<=10?n:n.slice(0,10));return U("",((s={})[""]=e,s),o,i,r,"",[])}}if(!p("json-parse")){var m,v,T=l.fromCharCode,w={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},y=function(){throw m=v=null,n()},A=function(){for(var e,t,n,r,o,i=v,a=i.length;m<a;)switch(o=i.charCodeAt(m)){case 9:case 10:case 13:case 32:m++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=s?i.charAt(m):i[m],m++,e;case 34:for(e="@",m++;m<a;)if((o=i.charCodeAt(m))<32)y();else if(92==o)switch(o=i.charCodeAt(++m)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=w[o],m++;break;case 117:for(t=++m,n=m+4;m<n;m++)48<=(o=i.charCodeAt(m))&&o<=57||97<=o&&o<=102||65<=o&&o<=70||y();e+=T("0x"+i.slice(t,m));break;default:y()}else{if(34==o)break;for(o=i.charCodeAt(m),t=m;32<=o&&92!=o&&34!=o;)o=i.charCodeAt(++m);e+=i.slice(t,m)}if(34==i.charCodeAt(m))return m++,e;y();default:if(t=m,45==o&&(r=!0,o=i.charCodeAt(++m)),48<=o&&o<=57){for(48==o&&(48<=(o=i.charCodeAt(m+1))&&o<=57)&&y(),r=!1;m<a&&(48<=(o=i.charCodeAt(m))&&o<=57);m++);if(46==i.charCodeAt(m)){for(n=++m;n<a&&(48<=(o=i.charCodeAt(n))&&o<=57);n++);n==m&&y(),m=n}if(101==(o=i.charCodeAt(m))||69==o){for(43!=(o=i.charCodeAt(++m))&&45!=o||m++,n=m;n<a&&(48<=(o=i.charCodeAt(n))&&o<=57);n++);n==m&&y(),m=n}return+i.slice(t,m)}if(r&&y(),"true"==i.slice(m,m+4))return m+=4,!0;if("false"==i.slice(m,m+5))return m+=5,!1;if("null"==i.slice(m,m+4))return m+=4,null;y()}return"$"},k=function(e){var t,n;if("$"==e&&y(),"string"==typeof e){if("@"==(s?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=A());n||(n=!0))n&&(","==e?"]"==(e=A())&&y():y()),","==e&&y(),t.push(k(e));return t}if("{"==e){for(t={};"}"!=(e=A());n||(n=!0))n&&(","==e?"}"==(e=A())&&y():y()),","!=e&&"string"==typeof e&&"@"==(s?e.charAt(0):e[0])&&":"==A()||y(),t[e.slice(1)]=k(A());return t}y()}return e},P=function(e,t,n){var r=x(e,t,n);r===C?delete e[t]:e[t]=r},x=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(E.call(o)==D)for(r=o.length;r--;)P(o,r,n);else S(o,function(e){P(o,e,n)});return n.call(e,t,o)};c.parse=function(e,t){var n,r;return m=0,v=""+e,n=k(A()),"$"!=A()&&y(),m=v=null,t&&E.call(t)==h?x(((r={})[""]=n,r),"",t):n}}}return c.runInContext=R,c}if(!n||n.global!==n&&n.window!==n&&n.self!==n||(J=n),t&&!e)R(J,t);else{var r=J.JSON,o=J.JSON3,i=!1,a=R(J,J.JSON3={noConflict:function(){return i||(i=!0,J.JSON=r,J.JSON3=o,r=o=null),a}});J.JSON={parse:a.parse,stringify:a.stringify}}e&&define(function(){return a})}).call(this),JSON_Z=s}();var _paq=_paq||[];!function(){function setupWebViewJavascriptBridge(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)}var Lh;if(window.DATATIST={},function(){var util={debugLevel:!!dtTracker.d&&dtTracker.d};function utf8_encode(e){return unescape(window.encodeURIComponent(e))}window.DATATIST.util=util,util.merge=function(){for(var e,t={},n=0,r=arguments.length;n<r;n++)for(e in arguments[n])arguments[n].hasOwnProperty(e)&&(t[e]=arguments[n][e]);return t},util.debug=function(){util.debugLevel&&console.log(arguments[0])},util.log=function(){util.debugLevel&&console.log(arguments[0])},util.info=function(){util.debugLevel&&console.log(arguments[0])},util.error=function(){util.debugLevel&&console.log(arguments[0])},util.isDefined=function(e){return"undefined"!==typeof e},util.isFunction=function(e){return"function"==typeof e},util.isObject=function(e){return"object"==typeof e},util.isString=function(e){return"string"==typeof e||e instanceof String},util.isObjectEmpty=function(e){if(!e)return!0;var t,n=!0;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n=!1);return n},util.isNumeric=function(e){return"number"==typeof e||e-0==e&&0<e.length},util.isInArray=function(e,t){return e.indexOf(t)<0?0:1},util.parseInt=function(e){return util.isNumeric(e)?parseInt(e):0},util.parseFloat=function(e){return util.isNumeric(e)?parseFloat(e):0},util.parseBoolean=function(e){var t=0;return!0===e?t=1:util.isNumeric(e)&&0<e?t=1:"true"==e&&(t=1),t},util.clearObject=function(e){for(key in e)null!=e[key]&&util.isDefined(e[key])||delete e[key]},util.jx={getHTTPObject:function(){var t=!1;if("undefined"!=typeof ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}else if(window.XMLHttpRequest)try{t=new XMLHttpRequest}catch(e){t=!1}return t},load:function(url,callback,format,method,opt){var http=this.init();if(http&&url){http.overrideMimeType&&http.overrideMimeType("text/xml"),method||(method="GET"),format||(format="text"),opt||(opt={}),format=format.toLowerCase(),method=method.toUpperCase();var parameters=null;if("POST"==method){var parts=url.split("?");url=parts[0],parameters=parts[1]}http.open(method,url,!0),opt.compress&&http.setRequestHeader("Content-Language","compressed"),"POST"==method&&http.setRequestHeader("Content-type","application/x-www-form-urlencoded");var ths=this;opt.handler?http.onreadystatechange=function(){opt.handler(http)}:http.onreadystatechange=function(){if(4==http.readyState)if(200==http.status){var result="";http.responseText&&(result=http.responseText),"j"==format.charAt(0)?(result=result.replace(/[\n\r]/g,""),result=eval("("+result+")")):"x"==format.charAt(0)&&(result=http.responseXML),callback&&callback(result)}else opt.loadingIndicator&&document.getElementsByTagName("body")[0].removeChild(opt.loadingIndicator),opt.loading&&(document.getElementById(opt.loading).style.display="none")},http.send(parameters)}},bind:function(e){var t={url:"",onSuccess:!1,onError:!1,format:"text",method:"GET",update:"",loading:"",loadingIndicator:""};for(var n in t)e[n]&&(t[n]=e[n]);if(t.url){var r=!1;t.loadingIndicator&&((r=document.createElement("div")).setAttribute("style","position:absolute;top:0px;left:0px;"),r.setAttribute("class","loading-indicator"),r.innerHTML=t.loadingIndicator,document.getElementsByTagName("body")[0].appendChild(r),this.opt.loadingIndicator=r),t.loading&&(document.getElementById(t.loading).style.display="block"),this.load(t.url,function(e){t.onSuccess&&t.onSuccess(e),t.update&&(document.getElementById(t.update).innerHTML=e),r&&document.getElementsByTagName("body")[0].removeChild(r),t.loading&&(document.getElementById(t.loading).style.display="none")},t.format,t.method,t)}},init:function(){return this.getHTTPObject()}},util.sha1=function(e){var t,n,r,o,i,a,s,c,u,l,d=function(e,t){return e<<t|e>>>32-t},f=function(e){var t,n="";for(t=7;0<=t;t--)n+=(e>>>4*t&15).toString(16);return n},p=[],h=1732584193,g=4023233417,m=2562383102,v=271733878,T=3285377520,w=[];for(l=(e=utf8_encode(e)).length,n=0;n<l-3;n+=4)r=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),w.push(r);switch(3&l){case 0:n=2147483648;break;case 1:n=e.charCodeAt(l-1)<<24|8388608;break;case 2:n=e.charCodeAt(l-2)<<24|e.charCodeAt(l-1)<<16|32768;break;case 3:n=e.charCodeAt(l-3)<<24|e.charCodeAt(l-2)<<16|e.charCodeAt(l-1)<<8|128}for(w.push(n);14!=(15&w.length);)w.push(0);for(w.push(l>>>29),w.push(l<<3&4294967295),t=0;t<w.length;t+=16){for(n=0;n<16;n++)p[n]=w[t+n];for(n=16;n<=79;n++)p[n]=d(p[n-3]^p[n-8]^p[n-14]^p[n-16],1);for(o=h,i=g,a=m,s=v,c=T,n=0;n<=19;n++)u=d(o,5)+(i&a|~i&s)+c+p[n]+1518500249&4294967295,c=s,s=a,a=d(i,30),i=o,o=u;for(n=20;n<=39;n++)u=d(o,5)+(i^a^s)+c+p[n]+1859775393&4294967295,c=s,s=a,a=d(i,30),i=o,o=u;for(n=40;n<=59;n++)u=d(o,5)+(i&a|i&s|a&s)+c+p[n]+2400959708&4294967295,c=s,s=a,a=d(i,30),i=o,o=u;for(n=60;n<=79;n++)u=d(o,5)+(i^a^s)+c+p[n]+3395469782&4294967295,c=s,s=a,a=d(i,30),i=o,o=u;h=h+o&4294967295,g=g+i&4294967295,m=m+a&4294967295,v=v+s&4294967295,T=T+c&4294967295}return(u=f(h)+f(g)+f(m)+f(v)+f(T)).toLowerCase()}}(),function(e){var s=document,c=navigator,a=screen,u=window,l=(u.performance||u.mozPerformance||u.msPerformance||u.webkitPerformance,u.encodeURIComponent),n=u.decodeURIComponent,d=(unescape,e.DATATIST.util);e.DATATIST.common={};var f=e.DATATIST.common;function p(e){var t={sessionStartTime:(new Date).getTime()},n=g(),r=c.userLanguage||c.language,o="";for(var i in n)"res"!=i&&(0<o.length&&(o+=";"),o+=i+":"+n[i]);var a={title:s.title,url:s.location.href,referer:s.referrer,sessionId:t.sessionId,deviceId:t.deviceId,seStartTime:t.sessionStartTime,resolution:n.res,language:r,plugin:o};return a=d.merge(a,e),d.clearObject(a),d.log("sendEvent:"),d.log(a),a}function h(e){var t="";for(var n in e)0<t.length&&(t+="&"),d.isObject(e[n])?t+=n+"="+l(JSON_Z.stringify(e[n])):t+=n+"="+l(e[n]);return t}function g(){var e,t,n={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},r={};if(!new RegExp("MSIE").test(c.userAgent)){if(c.mimeTypes&&c.mimeTypes.length)for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t=c.mimeTypes[n[e]],r[e]=t&&t.enabledPlugin?"1":"0");"unknown"!=typeof navigator.javaEnabled&&d.isDefined(c.javaEnabled)&&c.javaEnabled()&&(r.java="1"),d.isFunction(u.GearsFactory)&&(r.gears="1"),r.cookie=f.hasCookies()}var o=parseInt(a.width,10),i=parseInt(a.height,10);return r.res=parseInt(o,10)+"x"+parseInt(i,10),r}f.maxWaitTime=(new Date).getTime()+2e3,f.sendRequest=function(e,t,n){var r=p(t);/datatist-sdk-ios/.test(navigator.userAgent)?f.sendToIos(r,n):/datatist-sdk-android/.test(navigator.userAgent)?f.sendToAndriod(r,n):f.sendToServer(e,r,n)},f.sendToAndriod=function(e,t){try{d.log("call Datatist_APP_JS_Bridge.bridgeTrack(JSON_Z.stringify(sendEvent))"),Datatist_APP_JS_Bridge.bridgeTrack(JSON_Z.stringify(e))}catch(e){dtTrackerLog&&dtTrackerLog.logVar(e)}},f.sendToIos=function(e){try{function t(e){try{callbackButton.innerHTML=e}catch(e){dtTrackerLog&&dtTrackerLog.logVar(e)}}window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.callHandler&&window.webkit.messageHandlers.callHandler.postMessage&&window.webkit.messageHandlers.callHandler.postMessage(e),window.dtIosBridge?window.dtIosBridge.callHandler("bridgeTrack",e,t):callHandler("bridgeTrack",e,t)}catch(e){dtTrackerLog&&dtTrackerLog.logVar(e)}},f.sendToServer=function(e,t,n){if(dtTracker.c)f.sendCompressRequest(e,t,n);else{var r=new Image(1,1);r.onload=function(){"function"==typeof n&&n()},r.onerror=r.onload;var o=h(t);r.src=e+"?"+o}},f.sendCompressRequest=function(e,t,n){var r=e,o=p(t);o=d.compress(o),d.log("compressed sendEvent="),d.log(o);JSON_Z.stringify(p(t));r+="?"+DATATIST.util.LZString.compressToBase64(h(t)),d.jx.load(r,n,"text","GET",{compress:!0})},f.sendBatchRequests=function(e,t,n){for(var r=[],o=0;o<t.length;o++){var i=p(t[o]);r.push(h(i))}var a=e;a+="?"+l(JSON_Z.stringify({requests:r})),d.jx.load(a,n,"text","post")},f.setCookie=function(e,t,n,r,o,i){var a;c.cookieEnabled&&(n&&(a=new Date).setTime(a.getTime()+n),s.cookie=e+"="+l(t)+(n?";expires="+a.toGMTString():"")+";path="+(r||"/")+(o?";domain="+o:"")+(i?";secure":""))},f.getCookie=function(e){if(!c.cookieEnabled)return 0;var t=new RegExp("(^|;)[ ]*"+e+"=([^;]*)").exec(s.cookie);return t?n(t[2]):0},f.deleteCookie=function(e,t,n){f.setCookie(e,"",-86400,t,n)},f.hasCookies=function(){return c.cookieEnabled?"1":"0"},f.generateRandomUuid=function(){return d.sha1((c.userAgent||"")+(c.platform||"")+JSON_Z.stringify(g())+(new Date).getTime()+Math.random()).slice(0,16)},f.bindEvent=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},f.removeEvent=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},f.getTargetInfo=function(r,e){if(1===r.nodeType){var o={};return(e=e||window.DATATIST.tracker.getAutoTrackAttributes()).forEach(function(e,t){var n=f.getAttr(r,e);n&&(o[e]=n)}),o.eId=r.getAttribute("id"),o.eType=r.nodeName.toUpperCase(),o.eContent=f.getEleContent(r),o.ePath=f.getEPath(r,null,!0),o.ePosition=f.getElePosition(o.ePath),o.id=d.sha1("datatist"+s.location.href+o.ePath).substr(0,16),d.clearObject(o),o}},f.getEleContent=function(e){var t="";switch(e.nodeName.toUpperCase()){case"INPUT":t=e.value;break;default:t="String"==typeof e.textContent?e.textContent:e.innerText}return t.trim()},f.getElePosition=function(e){var t=e.split("/"),n=t[t.length-1];return n.substring(n.indexOf("[",-1)+1,n.indexOf("]",-1))},f.getEPath=function(e,t,n){t=t||document.body;for(var r=0,o="";e!==t;){if(1e3<r++)throw new Error("Got to maximum traversal level without reaching the root node.");var i=0;if(void 0===e.parentNode||null===e.parentNode)break;for(var a,s=e.parentNode.children,c=0;c<s.length&&s[c]!==e;c++)s[c].nodeName===e.nodeName&&i++;a=n?"["+i+"]":0<i?"["+i+"]":"",o=e.nodeName+a+"/"+o,e=e.parentNode}return(o=o.slice(0,-1)).toLowerCase()},f.getAttr=function(e,t){return e.getAttribute(t)},f.findTargetEle=function(e,t,n,r){var o=e.nodeName.toUpperCase();if(d.isInArray(t,o)&&"IMG"!==o)return e;r=r||0,n=n||1;var i=e.parentNode,a=i.nodeName.toUpperCase();return"A"===a?i:"IMG"===o?e:d.isInArray(t,a)?i:++r>=n?e:f.findTargetEle(i,t,n,r)},f.blockingBrowser=function(){f.bindEvent(window,"beforeunload",function(e){if(!f.waitTiming)return;var t=+Date.now();if(r=t+200,t<f.waitTiming&&t<r)for(var n=t+o;t<n;)t=+Date.now()}),f.bindEvent(window,"pagehide",function(e){if(!f.waitTiming)return;var t=+Date.now();if(t<f.waitTiming&&t<r)for(var n=t+o;t<n;)t=+Date.now()}),f.bindEvent(window,"unload",function(e){if(!f.waitTiming)return;var t=+Date.now();if(t<f.waitTiming&&t<r)for(;this.waitTime>t;)t=+Date.now()});var r,o=50},f.addClass=function(e,t){var n=e.className;added=n+(""!=n?" ":"")+t,e.className=added},f.removeClass=function(e,t){var n=" "+e.className+" ";n=n.replace(/(\s+)/gi," "),removed=n.replace(" "+t+" "," "),removed=removed.replace(/(^\s+)|(\s+$)/g,""),e.className=removed},f.hasClass=function(e,t){var n=e.className.split(/\s+/);for(x in x=0,n)if(n[x]==t)return!0;return!1},f.isIE=function(){return+[1]?0:1},f.parseUrl=function(e){e=/^(http|https):\/\//.test(e)?e:"http://"+(e||"");var t=document.createElement("a");return t.href=e,{hash:t.hash.replace("#",""),host:t.host,hostname:t.hostname,href:t.href,origin:t.origin,pathname:t.pathname.replace(/^([^\/])/,"/$1"),port:t.port,protocol:t.protocol.replace(":",""),search:t.search}},f.dealCurrentPageUrl=function(e){/^http[s]?:\/\//.test(e)&&(e=e.split("://")[1]);var t,n=location.host,r=location.search,o=e.indexOf("/"),i=e.indexOf("?");return t=-1!==i?(r=e.slice(i),e.substring(o,i)):e.slice(o),{search:r,pathname:t,host:n}}}(window),function(e){var t;e.console=window.console||((t={}).log=t.warn=t.debug=t.info=t.error=t.time=t.dir=t.profile=t.clear=t.exception=t.trace=t.assert=function(){},t);var n=window.DATATIST.util;function r(){this.init(),this.writeToDoc(navigator.userAgent),this.logBox=document.getElementById("logBox"),this.logVar=function(e){this.writeToDoc(e)},this.logUserAgent=function(e){this.writeToDoc(e+":====  userAgent 未匹配！")}}r.prototype.debug=function(){if(n&&!n.debugLevel)return 1},r.prototype.init=function(){if(!this.debug()){console.log(navigator.userAgent);var e=this.createEle("div",{id:"logBox"});document.getElementsByTagName("body")[0].appendChild(e)}},r.prototype.writeToDoc=function(e,t){if(!this.debug()&&(void 0===t&&(t=document.getElementById("logBox")),void 0!==e||void 0!==t)){var n=this.createEle("p",{className:"log"},e);if(0===t.children.length)return t.appendChild(n);t.insertBefore(n,t.firstChild)}},r.prototype.createEle=function(e,t,n){var r=document.createElement(e);for(var o in t)r.setAttribute(o,t[o]);return n&&(r.innerHTML=n+'<span style="color:#666;margin-left:20px">'+this.getDateNow()+"</span>"),r},r.prototype.getDateNow=function(e,t,n){var r=new Date;return r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+":"+r.getMilliseconds()},e.dtTrackerLog=new r}(window),/datatist-sdk-ios/.test(navigator.userAgent)&&setupWebViewJavascriptBridge(function(e){window.dtIosBridge=e}),window.DATATIST.util.LZString=function(){var v=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function i(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var t=a._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,function(e){return i(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":a._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var t=new Array(e.length/2),n=0,r=t.length;n<r;n++)t[n]=256*e[2*n]+e[2*n+1];var o=[];return t.forEach(function(e){o.push(v(e))}),a.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,function(e){return i(r,t.charAt(e))}))},compress:function(e){return a._compress(e,16,function(e){return v(e)})},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},s={},c="",u="",l="",d=2,f=3,p=2,h=[],g=0,m=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=f++,s[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(a,u))l=u;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)g<<=1,m==t-1?(m=0,h.push(n(g)),g=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<p;r++)g=g<<1|o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[l]}else for(o=a[l],r=0;r<p;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,p),p++),a[u]=f++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)g<<=1,m==t-1?(m=0,h.push(n(g)),g=0):m++;for(o=l.charCodeAt(0),r=0;r<8;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}else{for(o=1,r=0;r<p;r++)g=g<<1|o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),r=0;r<16;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[l]}else for(o=a[l],r=0;r<p;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(o=2,r=0;r<p;r++)g=g<<1|1&o,m==t-1?(m=0,h.push(n(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==t-1){h.push(n(g));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){var r,o,i,a,s,c,u,l=[],d=4,f=4,p=3,h="",g=[],m={val:n(0),position:t,index:1};for(r=0;r<3;r+=1)l[r]=r;for(i=0,s=Math.pow(2,2),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;switch(i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;u=v(i);break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;u=v(i);break;case 2:return""}for(o=l[3]=u,g.push(u);;){if(m.index>e)return"";for(i=0,s=Math.pow(2,p),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;switch(u=i){case 0:for(i=0,s=Math.pow(2,8),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;l[f++]=v(i),u=f-1,d--;break;case 1:for(i=0,s=Math.pow(2,16),c=1;c!=s;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),i|=(0<a?1:0)*c,c<<=1;l[f++]=v(i),u=f-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),l[u])h=l[u];else{if(u!==f)return null;h=o+o.charAt(0)}g.push(h),l[f++]=o+h.charAt(0),o=h,0==--d&&(d=Math.pow(2,p),p++)}}};return a}(),window.DATATIST.util.compress=(Lh={title:"t",url:"ul",referer:"rf",sessionId:"si",deviceId:"di",seStartTime:"ss",resolution:"rs",language:"lg",plugin:"p",userId:"u",siteId:"s",eventTime:"t",eventName:"n",eventBody:"b"},function(e){for(var t in e)t in Lh&&(e[Lh[t]]=e[t],delete e[t]);return e}),"object"!=typeof DATATIST.tracker){function Tracker(){var o,i,a,s,c,u,l,d,f,p,h,g,m,t,v=!1,T=!0,n=(v=!1,5),r=5,w=[],y=!1,A=[],k=["INPUT","BUTTON","A","IMG","LI","DIV","SPAN"],b=["href"],I=!1,S="DT_C_ID",C=window.DATATIST.common,E=window.DATATIST.util;this.getSessionId=function(){},this.getDeviceId=function(){},this.getSiteId=function(){return o},this.getProjectId=function(){return i},this.getSeStartTime=function(){},this.getUserAgent=function(){},this.getUaName=function(){},this.getUaMajor=function(){},this.getUaMinor=function(){},this.getUaOs=function(){},this.getUaOsMajor=function(){},this.getUaOsMinor=function(){},this.getUaDevice=function(){},this.getResolution=function(){return a},this.getLanguage=function(){},this.getPlugin=function(){},this.getNetType=function(){return s},this.getChannelId=function(){return c},this.getUrl=function(){return getUrl},this.getTitle=function(){return l},this.getReferer=function(){return d},this.getCustomerVar=function(){return f},this.getEventName=function(){},this.getEventBody=function(){},this.getUserId=function(){return h},this.getUserProperty=function(){return g},this.getBatch=function(){return v},this.getBatchTimeout=function(){return n},this.getBatchSize=function(){return r},this.getEventTime=function(){},this.getOSiteId=function(){return p},this.getOTrackerApiUrl=function(){return t},this.getEnable=function(){return T},this.getAutoTrack=function(){return y},this.getAutoTrackSkipElements=function(){return A},this.__getAutoTrackElements=function(){return k},this.getAutoTrackAttributes=function(){return b},this.getHashTag=function(){return I},this.setUserId=function(e){h!=e&&this.setUserProperty(null),h=e},this.setProjectId=function(e){i=e},this.setUserProperty=function(e){g=e},this.setTrackApiUrl=function(e){m=e},this.setSiteId=function(e){o=e},this.setResolution=function(e){a=e},this.setNetType=function(e){s=e},this.setChannelId=function(e){c=e},this.setUrl=function(e){u=e},this.setTitle=function(e){l=e},this.setReferer=function(e){d=e},this.setCustomerVar=function(e){f=e},this.setBatch=function(e){v=e},this.setBatchTimeout=function(e){n=e},this.setBatchSize=function(e){r=e},this.setOSiteId=function(e){p=e,_paq.push(["enableLinkTracking"]),function(){var e="//tracker.analyzer.datatist.cn/";_paq.push(["setTrackerUrl",e+"datatist.php"]),_paq.push(["setSiteId",p]);var t=document,n=t.createElement("script"),r=t.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e+"datatist.js",r.parentNode.insertBefore(n,r)}()},this.setOTrackerApiUrl=function(e){t=e},this.setEnable=function(e){T=e},this.setAutoTrack=function(e){y=e},this.setAutoTrackSkipElements=function(e){A=e&&"[object Array]"==={}.toString.call(e)?e.map(function(e){return e.toUpperCase()}):A},this.setAutoTrackAttributes=function(e){b=e},this.setHashTag=function(e){I=e},this.track=function(e,t){if(m){if(!T&&!/datatist-sdk-android/.test(navigator.userAgent)&&!/datatist-sdk-ios/.test(navigator.userAgent))return dtTrackerLog&&dtTrackerLog.logVar("enable is "+T+"!!!"),void E.error("enable is false!!!");var n=E.merge({title:l,url:u,referer:d,userId:h,userProperty:g,siteId:o,projectId:i,userAgent:void 0,uaName:void 0,uaMajor:void 0,uaMinor:void 0,uaOs:void 0,uaOsMajor:void 0,uaOsMinor:void 0,uaDevice:void 0,resolution:a,language:void 0,plugin:void 0,netType:s,channelId:c,customerVar:f,eventTime:(new Date).getTime()},e);E.clearObject(n),E.log("mergeEvent:"),E.log(n);var r=this._refreshCookie();n.sessionId=r.sessionId,n.deviceId=r.deviceId,n.seStartTime=r.seStartTime,E.debug("batch="+v),v?this._addBatchEvent(n):C.sendRequest(m,n,t),this.__deal1_0(n)}else E.error("trackApiUrl is empty!!!")},this.autoTrack=function(){y?(C.bindEvent(document.documentElement,"click",function(e){var t,n;if(e=e||window.event,t=e.target||e.srcElement,E.log("autoTracker model!!!"),t=C.findTargetEle(t,k),n=C.getTargetInfo(t,b),!E.isInArray(k,n.eType)||E.isInArray(A,n.eType))return;if("INPUT"===n.eType&&"password"===t.type)return;tracker.trackClick(n,function(){C.waitTiming=Date.now()})}),C.blockingBrowser()):E.error("autoTracker is "+y)},this.__deal1_0=function(e){if(null!==_paq&&p){if(!this.__userIdIsSet&&e.userId&&(_paq.push(["setUserId",e.userId]),this.__userIdIsSet=!0),"pageview"===e.eventName)return _paq.push(["trackPageView"]),void(this.__userIdIsSet=!1);var t=JSON_Z.stringify(e.eventBody),n=e.eventName;if(_paq.push(["trackEvent","event1.0",e.eventName,t]),"order"===n){var r=e.eventBody.productInfo;if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.productSKU;i.productSourceSku&&(a+="_"+i.productSourceSku),_paq.push(["addEcommerceItem",a,i.productTitle,"",i.productRealPrice,i.productQuantity])}var s=e.eventBody.couponInfo,c=e.eventBody.orderInfo;if(c){var u=0;for(o=0;s&&o<s.length;o++){u+=s[o].couponAMT}_paq.push(["trackEcommerceOrder",c.orderID,c.orderAMT,c.orderAMT-c.shipAMT,!1,c.shipAMT,u])}}this.__userIdIsSet=!1}},this._refreshCookie=function(){var e,t,n,r,o=C.getCookie(S),i=(new Date).getTime(),a=null;if(o&&(null!=(a=o.split("-"))&&4==a.length||(a=null)),a){e=a[0],t=a[1],n=a[2],r=parseInt(a[3]),isNaN(r)&&(r=0);var s=new Date(i),c=new Date(r);(18e5<i-r||s.getDay()!=c.getDay())&&(t=C.generateRandomUuid(),n=i),e&&16==e.length||(e=C.generateRandomUuid())}else{var u=C.generateRandomUuid();t=e=u,r=n=i}return o=e+"-"+t+"-"+n+"-"+i,C.deleteCookie(S),C.setCookie(S,o,5256e5),{sessionId:t,deviceId:e,seStartTime:n,lastAccessTime:r}},this._addBatchEvent=function(e){w.push(e),E.debug("batchEvents.length="+w.length),E.debug("batchSize="+r),w.length>=r&&(C.sendBatchRequests(m,w,function(e){E.debug("Post Return: "+e)}),w=[])}}window.DATATIST.tracker=new Tracker}window.DATATIST.tracker.addCart=function(e,t,n,r,o){var i=window.DATATIST.util;t=i.parseInt(t),n=i.parseFloat(n),tracker.track({eventName:"addCart",eventBody:{sku:e,productQuantity:t,productRealPrice:n,udVariable:r}},o)},window.DATATIST.tracker.event=function(e,t,n){tracker.track({eventName:"event",eventBody:{eventName:e,udVariable:t}},n)},window.DATATIST.tracker.login=function(e,t,n){tracker.setUserId(e),tracker.track({eventName:"login",eventBody:{uid:e,udVariable:t}},n)},window.DATATIST.tracker.order=function(e,t,n,r,o){var i=window.DATATIST.util;if(e&&(e.orderAMT=i.parseFloat(e.orderAMT),e.shipAMT=i.parseFloat(e.shipAMT)),t&&(t.couponAMT=i.parseFloat(t.couponAMT)),n&&n.length)for(var a=0;a<n.length;a++){var s=n[a];s.productRealPrice=i.parseFloat(s.productRealPrice),s.productOriPrice=i.parseFloat(s.productOriPrice),s.productQuantity=i.parseFloat(s.productQuantity)}tracker.track({eventName:"order",eventBody:{orderInfo:e,couponInfo:t,productInfo:n,udVariable:r}},o)},window.DATATIST.tracker.pageview=function(e,t){tracker.track({eventName:"pageview",eventBody:{udVariable:e}},t)},window.DATATIST.tracker.payment=function(e,t,n,r,o,i){var a=window.DATATIST.util;r=a.parseFloat(r),n=a.parseBoolean(n),tracker.track({eventName:"payment",eventBody:{orderID:e,payMethod:t,payStatus:n,payAMT:r,udVariable:o}},i)},window.DATATIST.tracker.preCharge=function(e,t,n,r,o,i){var a=window.DATATIST.util;e=a.parseFloat(e),n=a.parseFloat(n),r=a.parseBoolean(r),tracker.track({eventName:"preCharge",eventBody:{chargeAMT:e,chargeMethod:t,couponAMT:n,payStatus:r,udVariable:o}},i)},window.DATATIST.tracker.productPage=function(e,t,n,r,o,i,a,s){var c=window.DATATIST.util;o=c.parseFloat(o),i=c.parseFloat(i),tracker.track({eventName:"productPage",eventBody:{sku:e,productCategory1:t,productCategory2:n,productCategory3:r,productOriginalPrice:o,productRealPrice:i,udVariable:a}},s)},window.DATATIST.tracker.register=function(e,t,n,r,o){n=window.DATATIST.util.parseBoolean(n),tracker.track({eventName:"register",eventBody:{uid:e,type:t,authenticated:n,udVariable:r}},o)},window.DATATIST.tracker.search=function(e,t,n,r,o){var i=window.DATATIST.util;n=i.parseBoolean(n),t=i.parseBoolean(t),tracker.track({eventName:"search",eventBody:{keyword:e,recommendationSearchFlag:t,historySearchFlag:n,udVariable:r}},o)},window.DATATIST.tracker.logout=function(e,t){tracker.track({eventName:"logout",eventBody:{udVariable:e}},function(){tracker.setUserId(null),t&&t()})},window.DATATIST.tracker.trackClick=function(e,t){common.waitTiming=Date.now()+100,tracker.track({eventName:"click",eventBody:e},t)},window.DATATIST.tracker.customerTrack=function(e,t,n){if(!/^[a-zA-Z0-9_]+$/.test(e))return 0;tracker.track({eventName:e,eventBody:t},n)};var common=window.DATATIST.common,tracker=window.DATATIST.tracker,util=window.DATATIST.util;"object"!=typeof dtTracker&&(window.dtTracker=window.dtTracker||function(){(dtTracker.q=dtTracker.q||[]).push(arguments)},dtTracker.l=+new Date,dtTracker.d=!1);var _defaultQ=["autoTrack"],pack=dtTracker.q||[],Yk,$k;pack.push(_defaultQ),dtTracker.q.push=function(){var e,t=[],n=arguments[0];if(n&&!(n.length<1)){if(e=n[0],util.log("trackerCall="+e),1<n.length)for(var r=1;r<n.length;r++)t.push(n[r]);util.log("parameterArray="+t),tracker[e]?null!=t&&0!=t.length?tracker[e].apply(tracker,t):tracker[e].apply(tracker):util.error("method["+e+"] not exists")}};for(var i=0;i<pack.length;i++)dtTracker.q.push.apply(dtTracker.q,[pack[i]]);window,Yk=common,$k=tracker,$k.getAutoTrack()&&$k.pageview(),$k.getHashTag()&&Yk.bindEvent(window,"hashchange",function(){$k.pageview()}),function(a,i,s,c){function e(){var o=this;this.parsedUrl=i.dealCurrentPageUrl(a.location.href),this.message={action:"",url:a.location.href,pathname:this.parsedUrl.pathname,query:this.parsedUrl.search,host:a.location.host,mode:"",body:null},this.defineActiveClassName="datatist-define-active",this.defineHoverClassName="datatist-define-hover",this.init(),this.handleBeforeunload=function(){if(o.canPostMessage()){var e=s.merge(this.message,{action:"DATATIST_PAGE_UNLOAD",body:null});parent.postMessage(JSON_Z.stringify(e),"*")}},this.stopDefaultEvent=function(e){e?i.bindEvent(document,"click",o.handler,!0):(o.cleanDefineClass(o.defineActiveClassName),o.cleanDefineClass(o.defineHoverClassName),i.removeEvent(document,"click",o.handler,!0))},this.handler=function(e){var t;if(event=e||a.event,e.preventDefault(),e.stopImmediatePropagation(),o.cleanDefineClass(o.defineActiveClassName),t=e.target||e.srcElement,t=i.findTargetEle(t,c.__getAutoTrackElements()),"define-mode"===o.message.mode){var n=o.getBoundingClientRect(t),r=i.getTargetInfo(t);i.addClass(t,o.defineActiveClassName),o.emit("DATATIST_DEFINE_ELE",s.merge(n,r))}},this.eleHighLight=function(e){e=e||"click",i.bindEvent(a,e,function(e){var t;o.cleanDefineClass(o.defineHoverClassName),t=(e=e||a.event).target||e.srcElement,t=i.findTargetEle(t,c.__getAutoTrackElements()),"define-mode"===o.message.mode&&i.addClass(t,o.defineHoverClassName)})},this.handleScroll=function(){if(o.canPostMessage()&&o.message.body){var e=o.message.body.scrollY-a.scrollY,t=Object.assign(o.message.body,{scrollYOffset:e});o.emit("DATATIST_PAGE_SCROLL",t)}}}e.prototype.debug=function(){if(s&&!s.debugLevel)return 1},e.prototype.init=function(){if(this.canPostMessage()){var e=s.merge(this.message,{action:"DATATIST_CAN_DEFINED",siteId:c.getSiteId(),projectId:c.getProjectId()}),t=s.merge(this.message,{action:"DATATIST_SDK_INSTALLED",body:1});parent.postMessage(JSON_Z.stringify(e),"*"),parent.postMessage(JSON_Z.stringify(t),"*")}},e.prototype.canPostMessage=function(){return parent&&"function"==typeof parent.postMessage&&a.self!==a.top&&a.self!==a.parent},e.prototype.emit=function(e,t){this.message.body=t,this.message.action=e,parent.postMessage(JSON_Z.stringify(this.message),"*")},e.prototype.cleanDefineClass=function(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)i.removeClass(t[n],e)},e.prototype.getBoundingClientRect=function(e){var t=e.getBoundingClientRect(),n=t.top-document.documentElement.clientTop,r=t.bottom,o=t.left-document.documentElement.clientLeft,i=t.right;return{top:n,right:i,bottom:r,left:o,width:t.width||i-o,height:t.height||r-n,scrollY:a.scrollY}},e.prototype.loadPlugin=function(e){var t=e.originUrl;console.log(e,"111111");var n=this.createEle("script",{src:t+"/analyzer/static/libs/plugins/web-define-plugin/web-define-plugin.js"}),r=this.createEle("link",{href:t+"/analyzer/static/libs/plugins/web-define-plugin/web-define-plugin.css",rel:"stylesheet",type:"text/css"});document.body.appendChild(n),document.head.appendChild(r)},e.prototype.createEle=function(e,t,n){var r=document.createElement(e);for(var o in t)r.setAttribute(o,t[o]);return n&&(r.innerHTML=n),r};var n=new e;i.bindEvent(a,"message",function(e){var t;if(-1!==e.origin.indexOf("datatist")){try{t=JSON_Z.parse(e.data)}catch(e){t={}}switch(n.message=s.merge(n.message,t),t.action){case"DATATIST_DEFINE_MODE":"define-mode"===t.mode?(n.stopDefaultEvent(1),n.eleHighLight("mouseover")):"view-mode"===t.mode&&n.stopDefaultEvent(0);break;case"DATATIST_LOAD_PLUGIN":n.loadPlugin(t);break;case"DATATIST_CLASS_CLEAN":n.cleanDefineClass(n.defineActiveClassName)}}}),i.bindEvent(a,"beforeunload",n.handleBeforeunload),i.bindEvent(a,"scroll",n.handleScroll)}(window,common,util,tracker)}();